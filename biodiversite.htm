<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./css/style-galerie.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header>
      <nav>
        <ul>
          <li><a href="./actualite.html">Actualités</a></li>
          <li><a href="./biodiversite.htm">Biodiversité</a></li>
          <a href="./index.html"
            ><div class="logo"><img src="./assets/logo.png" alt="" /></div
          ></a>
          <li><a href="./galerie.html">Galerie</a></li>
          <li><a href="./documentation.html">Documentations</a></li>
        </ul>
      </nav>
    </header>
    <section class="hero-banner">
      <img id="hero-photo" src="./assets/img-32.jpg" alt="" />
      <h1>Biodiversité</h1>
      <div class="scroll-arrow">⬇</div>
    </section>

    <section class="Tableau"></section>

    <footer>
      <div class="img-logo">
        <nav>
          <ul>
            <li><a href="./actualite.html">Actualités</a></li>
            <li><a href="./biodiversite.htm">Biodiversité</a></li>
            <li><a href="./galerie.html">Galerie</a></li>
            <li><a href="./documentation.html">Documentations</a></li>
          </ul>
        </nav>
        <a href="./index.html"
          ><img style="width: 190px" src="./assets/logo.png" alt=""
        /></a>
      </div>
      <hr />
      <div class="partners">
        <img src="./assets/logo-ue-occ.jpg" alt="" />
        <img src="./assets/logo-occ.png" alt="" />
        <img src="./assets/logo-natura.jpg" alt="" />
      </div>
    </footer>
  </body>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      fetch("./docs/Archive/Info_Espece_03_2025.json")
        .then((response) => response.json())
        .then((data) => {
          afficherTableau(data.SPECIES_OTHER.SPECIES_OTHER_ROW);
        })
        .catch((error) =>
          console.error("Erreur de chargement du fichier JSON:", error)
        );

      function afficherTableau(species) {
        const sectionTableau = document.querySelector(".Tableau");

        let tableHTML = `
          <table border="1">
            <thead>
              <tr>
                <th>Image</th>
                <th>Groupe Taxonomique</th>
                <th>Nom Scientifique</th>
                <th>Taille Max</th>
                <th>Unité</th>
                <th>Catégorie Population</th>
                <th>Motivation Catégorie</th>
              </tr>
            </thead>
            <tbody>
        `;

        species.forEach((specie) => {
          const nomFichierImage =
            specie.LB_NOM.toLowerCase().replace(/\s+/g, "_") + ".jpg";
          const imagePath = `./docs/image/${nomFichierImage}`;

          tableHTML += `
            <tr>
              <td><img src="${imagePath}" alt="${
            specie.LB_NOM
          }" width="50" height="50" onerror="this.onerror=null;this.src='./assets/species/default.jpg';"></td>
              <td>${specie.TAXGROUP}</td>
              <td>${specie.LB_NOM}</td>
              <td>${specie.SIZE_MAX || "N/A"}</td>
              <td>${specie.UNIT || "N/A"}</td>
              <td>${specie.CAT_POP || "N/A"}</td>
              <td>${specie.CAT_MOTIV || "N/A"}</td>
            </tr>
          `;
        });

        tableHTML += "</tbody></table>";

        sectionTableau.innerHTML = tableHTML;
      }
    });

    window.addEventListener("scroll", function () {
      const header = document.querySelector("header");
      const nav = document.querySelector("nav");
      const scrollArrow = document.querySelector(".scroll-arrow");
      if (window.scrollY > 250) {
        header.classList.add("scroll-active");
        nav.classList.add("scroll-active-nav");
        scrollArrow.classList.add("hidden");
      } else {
        header.classList.remove("scroll-active");
        scrollArrow.classList.remove("hidden");
      }
    });
  </script>
</html>
